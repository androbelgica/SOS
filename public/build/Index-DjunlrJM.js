import{r as b,R as e,Q as v,t as E,a as d,S as u}from"./app2.js";import{M as w}from"./MainLayout-BWKM2YRe.js";import"./FlashMessage-BwSPylXo.js";import"./NotificationDropdown-i8q8POkw.js";import"./transition-CfHd3KDK.js";function M({auth:m,notifications:s}){const l=s&&s.data&&s.links?s:{data:[],links:[]},[o,c]=b.useState(l.data),g=async t=>{var r;try{const n=(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content");await d.post(`/notifications/${t}/mark-read`,{},{headers:{"X-CSRF-TOKEN":n,"Content-Type":"application/json",Accept:"application/json"}}),c(o.map(a=>a.id===t?{...a,read_at:new Date().toISOString()}:a))}catch(n){console.error("Error marking notification as read:",n)}},p=async()=>{var t;try{const r=(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content");await d.post("/notifications/mark-all-read",{},{headers:{"X-CSRF-TOKEN":r,"Content-Type":"application/json",Accept:"application/json"}}),c(o.map(n=>({...n,read_at:new Date().toISOString()})))}catch(r){console.error("Error marking all notifications as read:",r)}},k=async t=>{var r;if(confirm("Are you sure you want to delete this notification?"))try{const n=(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content");await d.delete(`/notifications/${t}`,{headers:{"X-CSRF-TOKEN":n,"Content-Type":"application/json",Accept:"application/json"}}),c(o.filter(a=>a.id!==t))}catch(n){console.error("Error deleting notification:",n)}},y=async()=>{var t;if(confirm("Are you sure you want to clear all read notifications?"))try{const r=(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content");await d.post("/notifications/clear-read",{},{headers:{"X-CSRF-TOKEN":r,"Content-Type":"application/json",Accept:"application/json"}}),c(o.filter(n=>!n.read_at))}catch(r){console.error("Error clearing read notifications:",r)}},h=t=>{t.read_at||g(t.id),t.type==="recipe_approved"||t.type==="recipe_rejected"||t.type==="recipe_under_review"?u.visit(`/my/recipes/${t.data.recipe_id}`):t.type==="recipe_submitted"&&m.user.role==="admin"&&u.visit("/admin/recipes")},x=t=>{switch(t){case"recipe_approved":return e.createElement("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center"},e.createElement("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})));case"recipe_rejected":return e.createElement("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center"},e.createElement("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})));case"recipe_submitted":return e.createElement("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center"},e.createElement("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})));case"recipe_under_review":return e.createElement("div",{className:"w-10 h-10 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center"},e.createElement("svg",{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})));default:return e.createElement("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center"},e.createElement("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})))}},f=t=>{const r=new Date(t),a=Math.floor((new Date-r)/1e3);return a<60?"Just now":a<3600?`${Math.floor(a/60)} minutes ago`:a<86400?`${Math.floor(a/3600)} hours ago`:a<604800?`${Math.floor(a/86400)} days ago`:r.toLocaleDateString()},i=o.filter(t=>!t.read_at).length;return e.createElement(w,{auth:m},e.createElement(v,{title:"Notifications"}),e.createElement("div",{className:"py-12"},e.createElement("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8"},e.createElement("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-6 border border-gray-200 dark:border-gray-700"},e.createElement("div",{className:"p-6"},e.createElement("div",{className:"flex justify-between items-center"},e.createElement("div",null,e.createElement("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white"},"Notifications"),e.createElement("p",{className:"text-gray-600 dark:text-gray-300"},i>0?`${i} unread notification${i>1?"s":""}`:"All caught up!")),e.createElement("div",{className:"flex gap-3"},i>0&&e.createElement("button",{onClick:p,className:"bg-blue-500 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors duration-200"},"Mark All Read"),e.createElement("button",{onClick:y,className:"bg-gray-500 hover:bg-gray-700 dark:bg-gray-600 dark:hover:bg-gray-700 text-white font-bold py-2 px-4 rounded transition-colors duration-200"},"Clear Read"))))),e.createElement("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg border border-gray-200 dark:border-gray-700"},o.length===0?e.createElement("div",{className:"p-12 text-center"},e.createElement("svg",{className:"mx-auto h-16 w-16 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM10.5 3.75a6 6 0 0 1 6 6v2.25a2.25 2.25 0 0 0 2.25 2.25H21a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h2.25A2.25 2.25 0 0 0 7.5 12V9.75a6 6 0 0 1 6-6Z"})),e.createElement("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-white"},"No notifications"),e.createElement("p",{className:"mt-2 text-gray-500 dark:text-gray-400"},"You're all caught up! Check back later for updates.")):e.createElement("div",{className:"divide-y divide-gray-200 dark:divide-gray-700"},o.map(t=>e.createElement("div",{key:t.id,className:`p-6 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 ${t.read_at?"":"bg-blue-50 dark:bg-blue-900/10"}`,onClick:()=>h(t)},e.createElement("div",{className:"flex items-start space-x-4"},x(t.type),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-start justify-between"},e.createElement("div",{className:"flex-1"},e.createElement("p",{className:"text-lg font-medium text-gray-900 dark:text-white"},t.title),e.createElement("p",{className:"text-gray-600 dark:text-gray-300 mt-1"},t.message),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2"},f(t.created_at))),e.createElement("div",{className:"flex items-center space-x-2 ml-4"},!t.read_at&&e.createElement("div",{className:"w-3 h-3 bg-blue-500 rounded-full flex-shrink-0"}),e.createElement("button",{onClick:r=>{r.stopPropagation(),k(t.id)},className:"text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors duration-200"},e.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))))))))))),l.links&&l.links.length>3&&e.createElement("div",{className:"mt-6 flex justify-center"},e.createElement("nav",{className:"flex space-x-2"},l.links.map((t,r)=>t.url?e.createElement(E,{key:r,href:t.url,className:`px-3 py-2 text-sm rounded transition-colors duration-200 ${t.active?"bg-blue-500 dark:bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,dangerouslySetInnerHTML:{__html:t.label}}):e.createElement("span",{key:r,className:`px-3 py-2 text-sm rounded transition-colors duration-200 ${t.active?"bg-blue-500 dark:bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,dangerouslySetInnerHTML:{__html:t.label}})))))))}export{M as default};
