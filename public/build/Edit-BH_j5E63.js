import{r as b,x as D,R as e,Q as P,t as f}from"./app2.js";import{M as U}from"./MainLayout-DLo1xHq3.js";import"./FlashMessage-BwSPylXo.js";import"./NotificationDropdown-i8q8POkw.js";import"./transition-CfHd3KDK.js";function T({auth:k,recipe:a,products:p,categories:v}){const[s,m]=b.useState(a.ingredients||[""]),[i,g]=b.useState(a.instructions||[""]),[y,E]=b.useState(a.image_url||null),{data:o,setData:n,put:h,processing:u,errors:l}=D({title:a.title||"",description:a.description||"",ingredients:a.ingredients||[],instructions:a.instructions||[],cooking_time:a.cooking_time||"",difficulty_level:a.difficulty_level||"medium",category:a.category||"",image:null,video:null,youtube_url:a.video_url||"",product_ids:a.products?a.products.map(t=>t.id):[],action:"save_draft"});b.useEffect(()=>{m(a.ingredients||[""]),g(a.instructions||[""])},[a]);const w=t=>{const r=t.target.files[0];if(n("image",r),r){const d=new FileReader;d.onload=c=>{E(c.target.result)},d.readAsDataURL(r)}},N=()=>{m([...s,""])},_=t=>{const r=s.filter((d,c)=>c!==t);m(r)},C=(t,r)=>{const d=[...s];d[t]=r,m(d)},I=()=>{g([...i,""])},R=t=>{const r=i.filter((d,c)=>c!==t);g(r)},S=(t,r)=>{const d=[...i];d[t]=r,g(d)},x=t=>{n("action",t),n("ingredients",s.filter(r=>r.trim()!=="")),n("instructions",i.filter(r=>r.trim()!=="")),h(route("user.recipes.update",a.id),{forceFormData:!0,onSuccess:()=>{}})},j=t=>{const r={draft:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",submitted:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",under_review:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",approved:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",rejected:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"},d={draft:"Draft",submitted:"Submitted",under_review:"Under Review",approved:"Approved",rejected:"Rejected"};return e.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${r[t]}`},d[t])};return e.createElement(U,{auth:k},e.createElement(P,{title:`Edit Recipe - ${a.title}`}),e.createElement("div",{className:"py-12"},e.createElement("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8"},e.createElement("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg border border-gray-200 dark:border-gray-700"},e.createElement("div",{className:"p-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"},e.createElement("div",{className:"flex justify-between items-center mb-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",null,e.createElement("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white"},"Edit Recipe"),e.createElement("p",{className:"text-gray-600 dark:text-gray-300"},"Update your seafood recipe")),j(a.status)),e.createElement("div",{className:"flex gap-3"},e.createElement(f,{href:route("user.recipes.show",a.id),className:"bg-gray-500 hover:bg-gray-700 dark:bg-gray-600 dark:hover:bg-gray-700 text-white font-bold py-2 px-4 rounded transition-colors duration-200"},"Cancel"),e.createElement(f,{href:route("user.recipes.index"),className:"bg-gray-400 hover:bg-gray-600 dark:bg-gray-500 dark:hover:bg-gray-600 text-white font-bold py-2 px-4 rounded transition-colors duration-200"},"Back to My Recipes"))),a.status==="rejected"&&a.rejection_reason&&e.createElement("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6"},e.createElement("h3",{className:"text-lg font-semibold text-red-800 dark:text-red-300 mb-2"},"Recipe was rejected"),e.createElement("p",{className:"text-red-700 dark:text-red-300"},e.createElement("strong",null,"Reason:")," ",a.rejection_reason),e.createElement("p",{className:"text-red-600 dark:text-red-400 text-sm mt-2"},"Please address the feedback above and resubmit your recipe.")),e.createElement("form",{onSubmit:t=>t.preventDefault()},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Recipe Title *"),e.createElement("input",{type:"text",value:o.title,onChange:t=>n("title",t.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter recipe title"}),l.title&&e.createElement("p",{className:"text-red-500 dark:text-red-400 text-sm mt-1"},l.title)),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Category *"),e.createElement("select",{value:o.category,onChange:t=>n("category",t.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},e.createElement("option",{value:""},"Select a category"),Object.entries(v).map(([t,r])=>e.createElement("option",{key:t,value:t},r))),l.category&&e.createElement("p",{className:"text-red-500 dark:text-red-400 text-sm mt-1"},l.category))),e.createElement("div",{className:"mb-6"},e.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Description *"),e.createElement("textarea",{value:o.description,onChange:t=>n("description",t.target.value),rows:4,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Describe your recipe..."}),l.description&&e.createElement("p",{className:"text-red-500 dark:text-red-400 text-sm mt-1"},l.description)),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Cooking Time (minutes) *"),e.createElement("input",{type:"number",value:o.cooking_time,onChange:t=>n("cooking_time",t.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"30",min:"1"}),l.cooking_time&&e.createElement("p",{className:"text-red-500 dark:text-red-400 text-sm mt-1"},l.cooking_time)),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Difficulty Level *"),e.createElement("select",{value:o.difficulty_level,onChange:t=>n("difficulty_level",t.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},e.createElement("option",{value:"easy"},"Easy"),e.createElement("option",{value:"medium"},"Medium"),e.createElement("option",{value:"hard"},"Hard")),l.difficulty_level&&e.createElement("p",{className:"text-red-500 dark:text-red-400 text-sm mt-1"},l.difficulty_level))),e.createElement("div",{className:"mb-6"},e.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Ingredients *"),s.map((t,r)=>e.createElement("div",{key:r,className:"flex gap-2 mb-2"},e.createElement("input",{type:"text",value:t,onChange:d=>C(r,d.target.value),className:"flex-1 border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:`Ingredient ${r+1}`}),s.length>1&&e.createElement("button",{type:"button",onClick:()=>_(r),className:"bg-red-500 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700 text-white px-3 py-2 rounded transition-colors duration-200"},"Remove"))),e.createElement("button",{type:"button",onClick:N,className:"bg-green-500 hover:bg-green-700 dark:bg-green-600 dark:hover:bg-green-700 text-white px-4 py-2 rounded text-sm transition-colors duration-200"},"Add Ingredient"),l.ingredients&&e.createElement("p",{className:"text-red-500 dark:text-red-400 text-sm mt-1"},l.ingredients)),e.createElement("div",{className:"mb-6"},e.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Instructions *"),i.map((t,r)=>e.createElement("div",{key:r,className:"flex gap-2 mb-2"},e.createElement("div",{className:"flex-shrink-0 w-8 h-10 bg-gray-100 dark:bg-gray-700 rounded flex items-center justify-center text-sm font-medium text-gray-600 dark:text-gray-300"},r+1),e.createElement("textarea",{value:t,onChange:d=>S(r,d.target.value),className:"flex-1 border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:`Step ${r+1}`,rows:2}),i.length>1&&e.createElement("button",{type:"button",onClick:()=>R(r),className:"bg-red-500 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700 text-white px-3 py-2 rounded transition-colors duration-200"},"Remove"))),e.createElement("button",{type:"button",onClick:I,className:"bg-green-500 hover:bg-green-700 dark:bg-green-600 dark:hover:bg-green-700 text-white px-4 py-2 rounded text-sm transition-colors duration-200"},"Add Step"),l.instructions&&e.createElement("p",{className:"text-red-500 dark:text-red-400 text-sm mt-1"},l.instructions)),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Recipe Image"),e.createElement("input",{type:"file",accept:"image/*",onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/20 dark:file:text-blue-300 dark:hover:file:bg-blue-900/30"}),y&&e.createElement("img",{src:y,alt:"Preview",className:"mt-2 w-full h-32 object-cover rounded border border-gray-200 dark:border-gray-600"}),l.image&&e.createElement("p",{className:"text-red-500 dark:text-red-400 text-sm mt-1"},l.image)),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"YouTube URL (Optional)"),e.createElement("input",{type:"url",value:o.youtube_url,onChange:t=>n("youtube_url",t.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://youtube.com/watch?v=..."}),l.youtube_url&&e.createElement("p",{className:"text-red-500 dark:text-red-400 text-sm mt-1"},l.youtube_url))),e.createElement("div",{className:"mb-6"},e.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Related Products (Optional)"),e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md p-3 bg-white dark:bg-gray-700"},p.map(t=>e.createElement("label",{key:t.id,className:"flex items-center space-x-2"},e.createElement("input",{type:"checkbox",value:t.id,checked:o.product_ids.includes(t.id),onChange:r=>{r.target.checked?n("product_ids",[...o.product_ids,t.id]):n("product_ids",o.product_ids.filter(d=>d!==t.id))},className:"rounded text-blue-600 dark:text-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400 dark:bg-gray-600 dark:border-gray-500"}),e.createElement("span",{className:"text-sm text-gray-900 dark:text-gray-300"},t.name))))),e.createElement("div",{className:"flex gap-4 pt-6 border-t border-gray-200 dark:border-gray-700"},e.createElement("button",{type:"button",onClick:()=>x("save_draft"),disabled:u,className:"bg-gray-500 hover:bg-gray-700 dark:bg-gray-600 dark:hover:bg-gray-700 text-white font-bold py-2 px-6 rounded disabled:opacity-50 transition-colors duration-200"},u?"Saving...":"Save Changes"),(a.status==="draft"||a.status==="rejected")&&e.createElement("button",{type:"button",onClick:()=>x("submit_for_review"),disabled:u,className:"bg-blue-500 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 text-white font-bold py-2 px-6 rounded disabled:opacity-50 transition-colors duration-200"},u?"Submitting...":"Submit for Review"))))))))}export{T as default};
