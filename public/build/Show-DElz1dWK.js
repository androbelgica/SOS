import{r as o,v as b,R as e,$ as v,Y as f}from"./app2.js";import{b as m}from"./imageHelpers-CwpBxbIF.js";import{M as p}from"./MainLayout-DgPacG7F.js";import"./FlashMessage-CcTVzuzS.js";import"./NotificationDropdown-Bq8s4d9o.js";import"./transition-Cpe-sHT0.js";function L({product:t,relatedRecipes:l,auth:d,timestamp:g}){const[c,x]=o.useState(Date.now()),i=g||c;o.useEffect(()=>{if(x(Date.now()),t.image_url){console.log(`Product image URL: ${t.image_url}`);const a=new Image;a.onload=()=>console.log("✅ Product image loaded successfully"),a.onerror=s=>console.error(`❌ Failed to load product image: ${t.image_url}`,s),a.src=t.image_url}},[t]);const{data:r,setData:n,post:y,processing:u}=b({quantity:t.unit_type==="kg"?250:1}),k=()=>{if(t.unit_type==="kg"){const a=r.quantity+250,s=t.stock_quantity*1e3;n("quantity",Math.min(a,s))}else{const a=r.quantity+1;n("quantity",Math.min(a,t.stock_quantity))}},h=()=>{if(t.unit_type==="kg"){const a=r.quantity-250;n("quantity",Math.max(250,a))}else{const a=r.quantity-1;n("quantity",Math.max(1,a))}},w=a=>{a.preventDefault(),y(route("cart.add",t.id))};return e.createElement(p,{auth:d,title:t.name},e.createElement(v,{title:t.name+" - Seafood Online Store"}),e.createElement("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden"},e.createElement("div",{className:"p-6 flex flex-col md:flex-row gap-8"},e.createElement("div",{className:"md:w-1/2"},e.createElement("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700"},e.createElement("img",{key:`product-image-${t.id}-${i}`,...m({src:t.image_url,alt:t.name,className:"w-full h-72 object-cover",type:"product",timestamp:i,onLoad:()=>console.log("✓ Product image displayed in show view")})}),e.createElement("div",{className:"absolute top-2 right-2"},e.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.stock_quantity>10?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":t.stock_quantity>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`},t.stock_quantity>10?"In Stock":t.stock_quantity>0?"Low Stock":"Out of Stock")))),e.createElement("div",{className:"flex-1"},e.createElement("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white"},t.name),e.createElement("p",{className:"mt-2 text-gray-700 dark:text-gray-300"},t.description),e.createElement("div",{className:"mt-4 flex items-center"},e.createElement("span",{className:"text-2xl font-semibold text-indigo-600 dark:text-indigo-400"},"₱",t.price!==null&&t.price!==void 0?typeof t.price=="number"?t.price.toFixed(2):parseFloat(t.price||0).toFixed(2):"0.00",t.unit_type==="kg"?"/kg":"/piece"),t.is_available?e.createElement("span",{className:"ml-3 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},"Available"):e.createElement("span",{className:"ml-3 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},"Not Available")),e.createElement("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"Stock: ",t.stock_quantity," ",t.unit_type==="kg"?"kg":"pieces"),t.is_available&&t.stock_quantity>0&&e.createElement("form",{onSubmit:w,className:"mt-6 flex items-center gap-2"},t.unit_type==="kg"?e.createElement("div",{className:"flex items-center border rounded dark:border-gray-600"},e.createElement("button",{type:"button",className:"px-3 py-1 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:h},"-"),e.createElement("div",{className:"w-20 px-2 py-1 text-center border-x dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"},r.quantity),e.createElement("button",{type:"button",className:"px-3 py-1 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:k},"+"),e.createElement("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2"},"g")):e.createElement("div",{className:"relative rounded-md shadow-sm"},e.createElement("input",{type:"number",min:"1",max:t.stock_quantity,value:r.quantity,onChange:a=>n("quantity",a.target.value),className:"focus:ring-indigo-500 focus:border-indigo-500 block w-20 sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md"})),e.createElement("button",{type:"submit",disabled:u,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 dark:bg-indigo-500 hover:bg-indigo-700 dark:hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})),"Add to Cart")))),l&&l.length>0&&e.createElement("div",{className:"mt-8"},e.createElement("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2 text-indigo-600 dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})),"Recipes Using This Product"),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},l.map(a=>e.createElement(f,{key:a.id,href:route("recipes.show",a.id),className:"bg-white dark:bg-gray-800 overflow-hidden shadow-md rounded-lg transition-all duration-300 hover:shadow-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/30 border border-gray-200 dark:border-gray-700 group"},e.createElement("div",{className:"relative"},e.createElement("img",{key:`recipe-image-${a.id}-${i}`,...m({src:a.image_url,alt:a.title,className:"w-full h-40 object-cover group-hover:opacity-90 transition-opacity",type:"recipe",timestamp:i})}),a.reviews_avg_rating&&e.createElement("div",{className:"absolute top-2 right-2 bg-white dark:bg-gray-800 rounded-full px-2 py-1 flex items-center shadow-md"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},e.createElement("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})),e.createElement("span",{className:"ml-1 text-xs font-medium text-gray-700 dark:text-gray-300"},parseFloat(a.reviews_avg_rating).toFixed(1)))),e.createElement("div",{className:"p-4"},e.createElement("h3",{className:"font-medium text-gray-900 dark:text-white text-lg"},a.title),e.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2 line-clamp-2"},a.description),e.createElement("div",{className:"mt-4 flex justify-end"},e.createElement("span",{className:"inline-flex items-center text-indigo-600 dark:text-indigo-400 text-sm font-medium"},"View Recipe",e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})))))))))))}export{L as default};
