import{r as n,R as e,S as w}from"./app2.js";import{F,C as P}from"./CameraCapture-CVdxvAM1.js";import{F as u,a as j}from"./SparklesIcon-Cbt0i-M0.js";import{a as I}from"./XMarkIcon-Dw0WrAo0.js";import{L as x}from"./dialog-1q41Dkce.js";function z({title:s,titleId:m,...d},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":m},d),s?n.createElement("title",{id:m},s):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const A=n.forwardRef(z);function U({isOpen:s,onClose:m,onRecognitionComplete:d}){const[o,i]=n.useState(null),[N,g]=n.useState(null),[k,b]=n.useState(!1),[p,f]=n.useState(!1),[r,c]=n.useState(null),[y,l]=n.useState(null),v=a=>{const t=a.target.files[0];t&&(i(t),g(URL.createObjectURL(t)),c(null),l(null))},C=(a,t)=>{i(a),g(t),b(!1),c(null),l(null)},R=async()=>{if(!o){l("Please select an image first.");return}f(!0),l(null);const a=new FormData;a.append("image",o),w.post(route("product-recognition.recognize"),a,{forceFormData:!0,onSuccess:t=>{if(t.props.recognition_result){const E=t.props.recognition_result;c(E.analysis),d&&d(E)}else l("Unexpected response format.")},onError:t=>{console.error("Recognition error:",t),t.error?l(t.error):t.image?l(t.image[0]):l("An error occurred while analyzing the image.")},onFinish:()=>{f(!1)}})},h=()=>{i(null),g(null),c(null),l(null),f(!1),m()},S=a=>{w.visit(route("products.show",a))};return s?e.createElement(e.Fragment,null,e.createElement(x,{open:s,onClose:h,className:"relative z-50"},e.createElement("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"}),e.createElement("div",{className:"fixed inset-0 flex items-center justify-center p-4"},e.createElement(x.Panel,{className:"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[90vh] overflow-y-auto"},e.createElement("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700"},e.createElement(x.Title,{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center"},e.createElement(u,{className:"h-6 w-6 mr-2 text-blue-600"}),"Product Recognition"),e.createElement("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},e.createElement(I,{className:"h-6 w-6"}))),e.createElement("div",{className:"p-6"},o?e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},e.createElement("div",null,e.createElement("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3"},"Selected Image"),e.createElement("div",{className:"relative"},e.createElement("img",{src:N,alt:"Selected for recognition",className:"w-full max-h-80 object-contain rounded-lg border border-gray-200 dark:border-gray-700"})),e.createElement("div",{className:"flex gap-3 mt-4"},e.createElement("button",{onClick:R,disabled:p,className:"flex-1 flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},p?e.createElement(e.Fragment,null,e.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Analyzing..."):e.createElement(e.Fragment,null,e.createElement(u,{className:"h-4 w-4 mr-2"}),"Analyze Image")),e.createElement("button",{onClick:()=>{i(null),g(null),c(null),l(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},"Clear"))),e.createElement("div",null,e.createElement("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3"},"Analysis Results"),y&&e.createElement("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4"},e.createElement("p",{className:"text-red-600 dark:text-red-400"},y)),r?e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:`p-3 rounded-lg ${r.seafood_detected?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800"}`},e.createElement("p",{className:`font-medium ${r.seafood_detected?"text-green-800 dark:text-green-200":"text-yellow-800 dark:text-yellow-200"}`},r.seafood_detected?"🐟 Seafood detected!":"⚠️ No seafood detected")),r.labels&&r.labels.length>0&&e.createElement("div",null,e.createElement("h5",{className:"font-medium text-gray-900 dark:text-white mb-2"},"Detected Items:"),e.createElement("div",{className:"flex flex-wrap gap-2"},r.labels.slice(0,5).map((a,t)=>e.createElement("span",{key:t,className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-full text-sm"},a.description," (",a.confidence,"%)")))),r.suggested_products&&r.suggested_products.length>0&&e.createElement("div",null,e.createElement("h5",{className:"font-medium text-gray-900 dark:text-white mb-2"},"Suggested Products:"),e.createElement("div",{className:"space-y-2 max-h-60 overflow-y-auto"},r.suggested_products.map((a,t)=>e.createElement("div",{key:t,className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},e.createElement("div",{className:"flex-1"},e.createElement("h6",{className:"font-medium text-gray-900 dark:text-white"},a.name),e.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-400"},"₱",a.price)),e.createElement("button",{onClick:()=>S(a.id),className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm"},e.createElement(j,{className:"h-4 w-4 mr-1"}),"View"))))),r.mock_data&&e.createElement("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3"},e.createElement("p",{className:"text-blue-800 dark:text-blue-200 text-sm"},"ℹ️ This is demo data. Configure Google Vision API for real recognition."))):e.createElement("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400"},e.createElement(u,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.createElement("p",null,'Click "Analyze Image" to start recognition')))):e.createElement("div",{className:"text-center py-8"},e.createElement("div",{className:"mb-6"},e.createElement(u,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.createElement("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Recognize Seafood Products"),e.createElement("p",{className:"text-gray-600 dark:text-gray-400"},"Take a photo or upload an image to identify seafood and get product suggestions")),e.createElement("div",{className:"flex flex-col sm:flex-row gap-4 justify-center"},e.createElement("button",{onClick:()=>b(!0),className:"flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},e.createElement(F,{className:"h-5 w-5 mr-2"}),"Take Photo"),e.createElement("label",{className:"flex items-center justify-center px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors cursor-pointer"},e.createElement(A,{className:"h-5 w-5 mr-2"}),"Upload Image",e.createElement("input",{type:"file",accept:"image/*",onChange:v,className:"hidden"})))))))),e.createElement(P,{isOpen:k,onClose:()=>b(!1),onCapture:C,title:"Take Photo for Recognition"})):null}export{U as P};
