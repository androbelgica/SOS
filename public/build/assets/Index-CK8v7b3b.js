import{r as p,v as F,R as e,$ as q}from"./app-D84QhpIK.js";import{M as S}from"./MainLayout-CRmf0Gt9.js";import{T as s,I as m}from"./InputError-DVSqNHbW.js";import{I as r}from"./InputLabel-B7p3SMX7.js";import"./FlashMessage-qDbjj4dk.js";import"./NotificationDropdown-DM9Ce-XS.js";import"./transition-RgjkZJHd.js";function O({auth:E,cartItems:g,total:h,user:t,timestamp:u}){p.useEffect(()=>{console.log("Checkout page loaded with cart items:",g),console.log("Timestamp:",u)},[g,u]);const[d,v]=p.useState(!0),[b,x]=p.useState("cod"),{data:l,setData:o,post:N,processing:_,errors:n}=F({shipping_address:(t==null?void 0:t.address)||"",shipping_city:(t==null?void 0:t.city)||"",shipping_state:(t==null?void 0:t.state)||"",shipping_postal_code:(t==null?void 0:t.postal_code)||"",shipping_country:(t==null?void 0:t.country)||"Philippines",shipping_phone:(t==null?void 0:t.phone)||"",billing_address:(t==null?void 0:t.address)||"",billing_city:(t==null?void 0:t.city)||"",billing_state:(t==null?void 0:t.state)||"",billing_postal_code:(t==null?void 0:t.postal_code)||"",billing_country:(t==null?void 0:t.country)||"Philippines",billing_phone:(t==null?void 0:t.phone)||"",save_address:!0,payment_method:"cod"}),f=a=>{if(a.preventDefault(),b!=="cod"){alert("Only Cash on Delivery is available at this time.");return}N(route("orders.store"))},i=a=>{const{name:c,value:y}=a.target;if(o(c,y),d&&c.startsWith("shipping_")){const C=c.replace("shipping_","billing_");o(C,y)}},w=()=>{const a=!d;v(a),a&&o({...l,billing_address:l.shipping_address,billing_city:l.shipping_city,billing_state:l.shipping_state,billing_postal_code:l.shipping_postal_code,billing_country:l.shipping_country,billing_phone:l.shipping_phone})},k=a=>{a.target.value==="cod"?(x("cod"),o("payment_method","cod")):alert("Payment option coming soon.")};return e.createElement(S,{auth:E,title:"Checkout"},e.createElement(q,{title:"Checkout - Seafood Online Store"}),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},e.createElement("div",{className:"lg:col-span-2"},e.createElement("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden mb-6"},e.createElement("div",{className:"px-4 py-5 sm:p-6"},e.createElement("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Shipping Information"),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},e.createElement("div",null,e.createElement(r,{htmlFor:"shipping_address",value:"Address"}),e.createElement(s,{id:"shipping_address",name:"shipping_address",value:l.shipping_address,className:"mt-1 block w-full",onChange:i,required:!0}),e.createElement(m,{message:n.shipping_address,className:"mt-2"})),e.createElement("div",null,e.createElement(r,{htmlFor:"shipping_phone",value:"Phone Number"}),e.createElement(s,{id:"shipping_phone",name:"shipping_phone",value:l.shipping_phone,className:"mt-1 block w-full",onChange:i,required:!0}),e.createElement(m,{message:n.shipping_phone,className:"mt-2"}))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},e.createElement("div",null,e.createElement(r,{htmlFor:"shipping_city",value:"City"}),e.createElement(s,{id:"shipping_city",name:"shipping_city",value:l.shipping_city,className:"mt-1 block w-full",onChange:i,required:!0}),e.createElement(m,{message:n.shipping_city,className:"mt-2"})),e.createElement("div",null,e.createElement(r,{htmlFor:"shipping_state",value:"Province/State"}),e.createElement(s,{id:"shipping_state",name:"shipping_state",value:l.shipping_state,className:"mt-1 block w-full",onChange:i,required:!0}),e.createElement(m,{message:n.shipping_state,className:"mt-2"})),e.createElement("div",null,e.createElement(r,{htmlFor:"shipping_postal_code",value:"Postal Code"}),e.createElement(s,{id:"shipping_postal_code",name:"shipping_postal_code",value:l.shipping_postal_code,className:"mt-1 block w-full",onChange:i,required:!0}),e.createElement(m,{message:n.shipping_postal_code,className:"mt-2"}))),e.createElement("div",{className:"mb-4"},e.createElement(r,{htmlFor:"shipping_country",value:"Country"}),e.createElement(s,{id:"shipping_country",name:"shipping_country",value:l.shipping_country,className:"mt-1 block w-full",onChange:i,required:!0}),e.createElement(m,{message:n.shipping_country,className:"mt-2"})),e.createElement("div",{className:"flex items-center mb-4"},e.createElement("input",{id:"save_address",name:"save_address",type:"checkbox",checked:l.save_address,onChange:a=>o("save_address",a.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.createElement("label",{htmlFor:"save_address",className:"ml-2 block text-sm text-gray-900 dark:text-gray-200"},"Save this address to my profile")))),e.createElement("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden"},e.createElement("div",{className:"px-4 py-5 sm:p-6"},e.createElement("div",{className:"flex justify-between items-center mb-4"},e.createElement("h2",{className:"text-lg font-medium text-gray-900 dark:text-white"},"Billing Information"),e.createElement("div",{className:"flex items-center"},e.createElement("input",{id:"same_as_shipping",name:"same_as_shipping",type:"checkbox",checked:d,onChange:w,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.createElement("label",{htmlFor:"same_as_shipping",className:"ml-2 block text-sm text-gray-900 dark:text-gray-200"},"Same as shipping address"))),!d&&e.createElement(e.Fragment,null,e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},e.createElement("div",null,e.createElement(r,{htmlFor:"billing_address",value:"Address"}),e.createElement(s,{id:"billing_address",name:"billing_address",value:l.billing_address,className:"mt-1 block w-full",onChange:i,required:!0}),e.createElement(m,{message:n.billing_address,className:"mt-2"})),e.createElement("div",null,e.createElement(r,{htmlFor:"billing_phone",value:"Phone Number"}),e.createElement(s,{id:"billing_phone",name:"billing_phone",value:l.billing_phone,className:"mt-1 block w-full",onChange:i,required:!0}),e.createElement(m,{message:n.billing_phone,className:"mt-2"}))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},e.createElement("div",null,e.createElement(r,{htmlFor:"billing_city",value:"City"}),e.createElement(s,{id:"billing_city",name:"billing_city",value:l.billing_city,className:"mt-1 block w-full",onChange:i,required:!0}),e.createElement(m,{message:n.billing_city,className:"mt-2"})),e.createElement("div",null,e.createElement(r,{htmlFor:"billing_state",value:"Province/State"}),e.createElement(s,{id:"billing_state",name:"billing_state",value:l.billing_state,className:"mt-1 block w-full",onChange:i,required:!0}),e.createElement(m,{message:n.billing_state,className:"mt-2"})),e.createElement("div",null,e.createElement(r,{htmlFor:"billing_postal_code",value:"Postal Code"}),e.createElement(s,{id:"billing_postal_code",name:"billing_postal_code",value:l.billing_postal_code,className:"mt-1 block w-full",onChange:i,required:!0}),e.createElement(m,{message:n.billing_postal_code,className:"mt-2"}))),e.createElement("div",{className:"mb-4"},e.createElement(r,{htmlFor:"billing_country",value:"Country"}),e.createElement(s,{id:"billing_country",name:"billing_country",value:l.billing_country,className:"mt-1 block w-full",onChange:i,required:!0}),e.createElement(m,{message:n.billing_country,className:"mt-2"}))))),e.createElement("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden mt-6"},e.createElement("div",{className:"px-4 py-5 sm:p-6"},e.createElement("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Payment Method"),e.createElement("div",{className:"space-y-3"},e.createElement("label",{className:"flex items-center"},e.createElement("input",{type:"radio",name:"payment_method",value:"cod",checked:b==="cod",onChange:k,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),e.createElement("span",{className:"ml-2 text-gray-900 dark:text-gray-200 font-medium"},"Cash on Delivery (COD)")),e.createElement("label",{className:"flex items-center opacity-50 cursor-not-allowed"},e.createElement("input",{type:"radio",name:"payment_method",value:"gcash",disabled:!0,className:"h-4 w-4 text-indigo-600 border-gray-300"}),e.createElement("span",{className:"ml-2 text-gray-900 dark:text-gray-200"},"GCash"," ",e.createElement("span",{className:"ml-1 text-xs text-gray-500"},"(Coming soon)"))),e.createElement("label",{className:"flex items-center opacity-50 cursor-not-allowed"},e.createElement("input",{type:"radio",name:"payment_method",value:"maya",disabled:!0,className:"h-4 w-4 text-indigo-600 border-gray-300"}),e.createElement("span",{className:"ml-2 text-gray-900 dark:text-gray-200"},"Maya"," ",e.createElement("span",{className:"ml-1 text-xs text-gray-500"},"(Coming soon)"))))))),e.createElement("div",{className:"lg:col-span-1"},e.createElement("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden"},e.createElement("div",{className:"px-4 py-5 sm:p-6"},e.createElement("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Order Summary"),e.createElement("div",{className:"space-y-4 mb-6"},g.map(a=>e.createElement("div",{key:a.id,className:"flex items-center space-x-4"},e.createElement("div",{className:"flex-shrink-0 w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-md overflow-hidden"},a.image_url&&e.createElement("img",{src:a.image_url,alt:a.name,className:"w-full h-full object-cover",onError:c=>{c.target.onerror=null,c.target.src="/images/placeholder.jpg"}})),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate"},a.name),e.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},a.unit_type==="kg"?`${a.quantity}g`:`${a.quantity} ${a.quantity>1?"pieces":"piece"}`)),e.createElement("div",{className:"flex-shrink-0 text-sm font-medium text-gray-900 dark:text-white"},"₱",a.subtotal.toFixed(2))))),e.createElement("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 mb-6"},e.createElement("div",{className:"flex justify-between text-sm mb-2"},e.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"Subtotal"),e.createElement("span",{className:"font-medium text-gray-900 dark:text-white"},"₱",h.toFixed(2))),e.createElement("div",{className:"flex justify-between text-sm mb-2"},e.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"Shipping"),e.createElement("span",{className:"font-medium text-gray-900 dark:text-white"},"Free")),e.createElement("div",{className:"flex justify-between text-base font-medium mt-4"},e.createElement("span",{className:"text-gray-900 dark:text-white"},"Total"),e.createElement("span",{className:"text-gray-900 dark:text-white"},"₱",h.toFixed(2)))),e.createElement("button",{type:"button",onClick:f,disabled:_,className:"w-full flex justify-center items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 dark:bg-indigo-500 hover:bg-indigo-700 dark:hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 disabled:opacity-50"},_?"Processing...":"Place Order"),e.createElement("div",{className:"mt-4"},e.createElement("a",{href:route("cart.index"),className:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 dark:hover:text-indigo-300 flex items-center justify-center",onClick:a=>{a.preventDefault(),window.location.href=route("cart.index")+"?t="+new Date().getTime()}},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})),"Return to cart")))))))}export{O as default};
