import{u as M,R as e,r as o,a as u,S as d}from"./app2.js";function L({className:g=""}){const{darkMode:s,toggleDarkMode:l}=M();return e.createElement("button",{onClick:l,className:`flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 ${g}`},s?e.createElement(e.Fragment,null,e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},e.createElement("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})),"Light Mode"):e.createElement(e.Fragment,null,e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},e.createElement("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})),"Dark Mode"))}function C({auth:g}){const[s,l]=o.useState(!1),[c,p]=o.useState([]),[i,m]=o.useState(0),[x,h]=o.useState(!1),k=o.useRef(null);o.useEffect(()=>{function t(r){k.current&&!k.current.contains(r.target)&&l(!1)}return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),o.useEffect(()=>{s&&c.length===0&&v()},[s]),o.useEffect(()=>{f();const t=setInterval(f,3e4);return()=>clearInterval(t)},[]);const v=async()=>{h(!0);try{const t=await u.get("/notifications/recent");p(t.data.notifications),m(t.data.unread_count)}catch(t){console.error("Error fetching notifications:",t)}finally{h(!1)}},f=async()=>{try{const t=await u.get("/notifications/unread-count");m(t.data.count)}catch(t){console.error("Error fetching unread count:",t)}},y=async t=>{var r;try{const n=(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content");await u.post(`/notifications/${t}/mark-read`,{},{headers:{"X-CSRF-TOKEN":n,"Content-Type":"application/json",Accept:"application/json"}}),p(c.map(a=>a.id===t?{...a,read_at:new Date().toISOString()}:a)),m(Math.max(0,i-1))}catch(n){console.error("Error marking notification as read:",n)}},w=async()=>{var t;try{const r=(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content");await u.post("/notifications/mark-all-read",{},{headers:{"X-CSRF-TOKEN":r,"Content-Type":"application/json",Accept:"application/json"}}),p(c.map(n=>({...n,read_at:new Date().toISOString()}))),m(0)}catch(r){console.error("Error marking all notifications as read:",r)}},E=t=>{if(t.read_at||y(t.id),t.type==="recipe_approved"||t.type==="recipe_rejected"||t.type==="recipe_under_review")d.visit(`/my/recipes/${t.data.recipe_id}`);else if(t.type==="recipe_submitted"&&g.user.role==="admin")d.visit("/admin/recipes");else if(t.type==="recipe_commented"||t.type==="comment_replied"||t.type==="recipe_reacted"||t.type==="comment_reacted"){const r=t.data.recipe_id,n=t.data.comment_id;n?d.visit(`/recipes/${r}#comment-${n}`):d.visit(`/recipes/${r}`)}else t.type==="admin_order_alert"&&t.data&&t.data.order_id&&d.visit(route("admin.orders.show",t.data.order_id));l(!1)},b=t=>{switch(t){case"recipe_approved":return e.createElement("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center"},e.createElement("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})));case"recipe_rejected":return e.createElement("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center"},e.createElement("svg",{className:"w-4 h-4 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})));case"recipe_submitted":return e.createElement("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center"},e.createElement("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})));case"recipe_under_review":return e.createElement("div",{className:"w-8 h-8 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center"},e.createElement("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})));case"recipe_commented":return e.createElement("div",{className:"w-8 h-8 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center"},e.createElement("svg",{className:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})));case"comment_replied":return e.createElement("div",{className:"w-8 h-8 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center"},e.createElement("svg",{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})));case"recipe_reacted":case"comment_reacted":return e.createElement("div",{className:"w-8 h-8 bg-pink-100 dark:bg-pink-900/30 rounded-full flex items-center justify-center"},e.createElement("svg",{className:"w-4 h-4 text-pink-600 dark:text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})));default:return e.createElement("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center"},e.createElement("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})))}},N=t=>{const r=new Date(t),a=Math.floor((new Date-r)/1e3);return a<60?"Just now":a<3600?`${Math.floor(a/60)}m ago`:a<86400?`${Math.floor(a/3600)}h ago`:a<604800?`${Math.floor(a/86400)}d ago`:r.toLocaleDateString()};return e.createElement("div",{className:"relative",ref:k},e.createElement("button",{onClick:()=>l(!s),className:"relative p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 rounded-lg transition-colors duration-200"},e.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM10.5 3.75a6 6 0 0 1 6 6v2.25a2.25 2.25 0 0 0 2.25 2.25H21a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h2.25A2.25 2.25 0 0 0 7.5 12V9.75a6 6 0 0 1 6-6Z"})),i>0&&e.createElement("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold"},i>99?"99+":i)),s&&e.createElement("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50"},e.createElement("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"},e.createElement("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white"},"Notifications"),i>0&&e.createElement("button",{onClick:w,className:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300"},"Mark all read")),e.createElement("div",{className:"max-h-96 overflow-y-auto"},x?e.createElement("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400"},"Loading notifications..."):c.length===0?e.createElement("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400"},"No notifications yet"):c.map(t=>e.createElement("div",{key:t.id,onClick:()=>E(t),className:`p-4 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 ${t.read_at?"":"bg-blue-50 dark:bg-blue-900/10"}`},e.createElement("div",{className:"flex items-start space-x-3"},b(t.type),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"text-sm font-medium text-gray-900 dark:text-white"},t.title),e.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1"},t.message),e.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2"},N(t.created_at))),!t.read_at&&e.createElement("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-2"}))))),c.length>0&&e.createElement("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700"},e.createElement("button",{onClick:()=>{d.visit("/notifications"),l(!1)},className:"w-full text-center text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300"},"View all notifications"))))}export{L as D,C as N};
